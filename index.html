<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For James üíò</title>

  <style>
    :root{
      --bg1:#120014; --bg2:#3a0038;
      --card:#ffffff12; --border:#ffffff26;
      --text:#fff; --muted:#ffffffc9;
      --pink:#ff4da6; --rose:#ff2d55; --gold:#ffd36b;
    }
    *{box-sizing:border-box}

    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 15%, #6b004f55 0%, transparent 60%),
        radial-gradient(1000px 650px at 80% 20%, #ff4da644 0%, transparent 60%),
        linear-gradient(160deg,var(--bg1),var(--bg2));
      overflow:hidden;
    }

    /* Floating hearts */
    .heart{
      position:absolute;
      width:18px; height:18px;
      transform:rotate(45deg);
      background: var(--rose);
      opacity:.18;
      animation: floatUp linear infinite;
      pointer-events:none;
    }
    .heart::before,.heart::after{
      content:"";
      position:absolute;
      width:18px; height:18px;
      border-radius:50%;
      background: inherit;
    }
    .heart::before{ left:-9px; top:0 }
    .heart::after{ left:0; top:-9px }

    @keyframes floatUp{
      from{ transform: translateY(35vh) rotate(45deg) scale(.9); }
      to  { transform: translateY(-130vh) rotate(45deg) scale(1.25); }
    }

    .wrap{ width:min(760px,92vw); padding:24px; position:relative; z-index:2; }

    .card{
      position:relative;
      background: linear-gradient(180deg, #ffffff18, #ffffff0b);
      border: 1px solid var(--border);
      border-radius: 26px;
      padding: 30px 24px 22px;
      backdrop-filter: blur(10px);
      box-shadow: 0 18px 60px #0007;
      text-align:center;
    }

    .big-heart{
      width:86px; height:86px; margin: 4px auto 16px;
      transform: rotate(45deg);
      background: linear-gradient(135deg, var(--pink), var(--rose));
      border-radius: 18px;
      position:relative;
      animation: pulse 1.2s ease-in-out infinite;
    }
    .big-heart::before,.big-heart::after{
      content:""; width:86px; height:86px; position:absolute; border-radius:50%;
      background: inherit;
    }
    .big-heart::before{ left:-43px; top:0 }
    .big-heart::after{ left:0; top:-43px }

    @keyframes pulse{
      0%,100%{ transform:rotate(45deg) scale(1)}
      50%{ transform:rotate(45deg) scale(1.08)}
    }

    h1{ margin:0 0 10px; font-size: clamp(28px, 5vw, 44px); }
    p{ margin:0 0 14px; color:var(--muted); font-size: clamp(15px,2.6vw,18px); }
    .q{ font-weight:800; color:#fff; font-size: clamp(18px,3.1vw,22px); }

    .btns{
      display:flex;
      gap:12px;
      justify-content:center;
      margin-top: 14px;
    }

    button{
      border:0; cursor:pointer;
      padding: 12px 16px;
      border-radius: 14px;
      font-weight: 800;
      font-size: 16px;
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }

    .yes{
      background: linear-gradient(135deg, var(--gold), #ff9bd1);
      color:#2a0030;
    }

    /* Bigger + harder NO */
    .no{
      background:#ffffff12;
      color:#fff;
      border:1px solid #ffffff2a;
      padding: 14px 18px;
      font-size:18px;
      position:relative;
      will-change: transform;
    }

    .note{
      margin-top:14px;
      font-size:15px;
      color:#ffffffc9;
      line-height:1.5;
    }

    .sig{
      margin-top:14px;
      font-size:13px;
      color:#ffffffa6;
    }
    .sig b{ color:#ffd36b; }

    .toast{
      position:fixed;
      left:50%;
      bottom:22px;
      transform:translateX(-50%);
      background:#0c0010cc;
      border:1px solid #ffffff24;
      padding:12px 16px;
      border-radius: 14px;
      opacity:0;
      transition: opacity .25s ease, transform .25s ease;
      pointer-events:none;
      z-index: 9;
      max-width:92vw;
      text-align:center;
    }
    .toast.show{ opacity:1; transform:translateX(-50%) translateY(-6px); }

    /* üíñ Special love moment banner (top of screen) */
    .moment{
      position: fixed;
      top: 22px;
      left: 50%;
      transform: translateX(-50%) translateY(-10px);
      background: linear-gradient(135deg, #ff9bd1, #ffd36b);
      color: #2a0030;
      padding: 18px 22px;
      border-radius: 18px;
      font-size: clamp(18px, 4vw, 24px);
      font-weight: 900;
      text-align: center;
      box-shadow: 0 20px 50px #0005;
      opacity: 0;
      pointer-events: none;
      transition: opacity .6s ease, transform .6s ease;
      z-index: 10;
      max-width: 92vw;
    }
    .moment.show{
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  </style>
</head>

<body>

<div class="wrap">
  <div class="card">

    <div class="big-heart"></div>

    <h1>Hi Love üíò</h1>
    <p>I made you a tiny little corner of the internet for one important question‚Ä¶</p>
    <p class="q">Will you be my Valentine? ‚ù§Ô∏è</p>

    <div class="btns">
      <button class="yes" id="yesBtn">YES! ü•∞</button>
      <button class="no" id="noBtn">Not a chance üòè</button>
    </div>

    <div class="note" id="note">(P.S. Try clicking ‚ÄúNO‚Äù üòå)</div>

    <div class="sig">Made with love by <b>Ravina</b> üíï</div>

  </div>
</div>

<div class="toast" id="toast"></div>
<div class="moment" id="moment"></div>

<!-- üé∂ Background music (starts automatically when he clicks YES) -->
<audio id="bgm" loop preload="auto" crossorigin="anonymous">
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_9c2d7c1f4c.mp3?filename=romantic-ambient-11157.mp3" type="audio/mpeg">
</audio>

<script>
  /* Hearts */
  const makeHeart = () => {
    const h = document.createElement('div');
    h.className = 'heart';
    const size = Math.random()*16 + 10;
    h.style.width = h.style.height = size+'px';
    h.style.left = Math.random()*100+'vw';
    h.style.animationDuration = (Math.random()*6 + 6)+'s';
    h.style.opacity = (Math.random() * 0.18 + 0.10).toFixed(2);

    const colors = ['#ff2d55', '#ff4da6', '#ffd36b'];
    h.style.background = colors[Math.floor(Math.random()*colors.length)];

    document.body.appendChild(h);
    setTimeout(()=>h.remove(),12000);
  };
  setInterval(makeHeart, 480);

  /* Toast */
  const toast = document.getElementById('toast');
  const showToast = (msg, ms=4200) => {
    toast.textContent = msg;
    toast.classList.add('show');
    clearTimeout(window.__toastTimer);
    window.__toastTimer = setTimeout(()=>toast.classList.remove('show'), ms);
  };

  /* Moment banner (top) */
  const momentBox = document.getElementById('moment');
  const showMoment = (msg, ms=5200) => {
    momentBox.textContent = msg;
    momentBox.classList.add('show');
    clearTimeout(window.__momentTimer);
    window.__momentTimer = setTimeout(()=>momentBox.classList.remove('show'), ms);
  };

  /* Confetti hearts */
  function confetti(){
    for(let i=0;i<24;i++){
      const c=document.createElement('div');
      c.className='heart';
      const size = Math.random()*12 + 10;
      c.style.width = c.style.height = size+'px';
      c.style.left = (50 + (Math.random()*10-5)) + 'vw';
      c.style.top = '65vh';
      c.style.opacity = 0.65;
      c.style.animationDuration = (Math.random()*1.6 + 1.3) + 's';
      c.style.transform = `translate(${Math.random()*520-260}px, ${Math.random()*-360-160}px) rotate(45deg)`;
      document.body.appendChild(c);
      setTimeout(()=>c.remove(),2000);
    }
  }

  /* ‚úÖ Robust auto-start music on YES (MP3 first, synth fallback) */
  const bgm = document.getElementById('bgm');
  let musicStarted = false;

  // WebAudio fallback (gentle ‚Äúromantic pad‚Äù)
  let audioCtx = null;
  let padOsc1 = null, padOsc2 = null, padGain = null;

  function startPad(){
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    if (audioCtx.state === "suspended") audioCtx.resume();

    if (padOsc1) return; // already running

    padGain = audioCtx.createGain();
    padGain.gain.value = 0.0;
    padGain.connect(audioCtx.destination);

    padOsc1 = audioCtx.createOscillator();
    padOsc2 = audioCtx.createOscillator();
    padOsc1.type = "sine";
    padOsc2.type = "triangle";

    padOsc1.frequency.value = 220;     // A3
    padOsc2.frequency.value = 329.63;  // E4

    padOsc1.connect(padGain);
    padOsc2.connect(padGain);

    padOsc1.start();
    padOsc2.start();

    padGain.gain.setTargetAtTime(0.08, audioCtx.currentTime, 0.25);
  }

  async function startRomanticMusic(){
    if (musicStarted) return;
    musicStarted = true;

    try{
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      if (audioCtx.state === "suspended") await audioCtx.resume();

      bgm.volume = 0.18;
      bgm.currentTime = 0;
      await bgm.play();
    } catch(e){
      startPad(); // fallback if MP3 blocked
    }
  }

  /* NO button dodge (bigger jumps, ramps up) */
  const noBtn = document.getElementById('noBtn');
  let dodgeLevel = 0;

  const dodge = () => {
    dodgeLevel++;

    const maxX = Math.min(180 + dodgeLevel * 70, 900);
    const maxY = Math.min(110 + dodgeLevel * 45, 520);

    const dx = (Math.random() * (maxX * 2) - maxX);
    const dy = (Math.random() * (maxY * 2) - maxY);

    noBtn.style.transform = `translate(${dx}px, ${dy}px) rotate(${(Math.random()*10-5).toFixed(1)}deg)`;

    if (dodgeLevel === 4) showToast("Determined, aren‚Äôt you? üòè", 2400);
    if (dodgeLevel === 7) showToast("Okay okay‚Ä¶ nice try üòÑ", 2400);

    setTimeout(()=>noBtn.style.transform='translate(0,0) rotate(0deg)', 900);
  };

  noBtn.onmouseenter = dodge;
  noBtn.ontouchstart = (e) => { e.preventDefault(); dodge(); };
  noBtn.onclick = () => showToast("Nice try üòÑ", 1800);

  /* YES logic */
  let yesClicks = 0;
  const note = document.getElementById('note');

  document.getElementById('yesBtn').onclick = () => {
    startRomanticMusic(); // üé∂ starts when he clicks YES

    yesClicks++;

    if(yesClicks === 1){
      showToast("I wouldn‚Äôt want this with anyone else üíñ", 4200);
    } else {
      showMoment("Almost seven years, and I still get butterflies üíñ", 5200);
    }

    confetti();

    note.innerHTML = `
      <div style="margin-top:10px;color:#ffffffc9; line-height:1.5">
        <b>Secret unlocked üíå</b><br/><br/>
        A little date plan, just for us‚Ä¶<br/>
        üìç North End, Boston<br/>
        üçù <b>You choose the restaurant you‚Äôre craving</b><br/>
        üíï And we‚Äôll make the rest special together
      </div>
    `;
  };
</script>

</body>
</html>
